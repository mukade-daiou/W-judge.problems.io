{"submission_id": "308", "source": "#include <cstdio>\r\n#define SIZE 1*2*3*4*5*6*7\r\n#define rmax 7\r\n\r\nvoid decode(int m,int n,int *L)\r\n{\r\n  bool b[rmax]={0};\r\n  for(int i=0;i<n;i++){\r\n    int S=m%(n-i);\r\n    m/=n-i;\r\n    int j=0,k=0;\r\n    while(1){\r\n      if(!b[j]){\r\n\tk++;\r\n\tif(k>S){\r\n\t  break;\r\n\t}\r\n      }\r\n      j++;\r\n    }\r\n    L[i]=j;\r\n    b[j]=1;\r\n  }\r\n}\r\n\r\nint encode(int *L,int n)\r\n{\r\n  bool b[rmax]={0};\r\n  int p=1,K=0;\r\n  for(int i=0;i<n;i++){\r\n    int S=0;\r\n    for(int j=0;j<L[i];j++){\r\n      if(!b[j]){\r\n\tS++;\r\n      }\r\n    }\r\n    K+=p*S;\r\n    p*=(n-i);\r\n    b[L[i]]=1;\r\n  }\r\n  return K;\r\n}\r\n\r\n\r\nint main()\r\n{\r\n  int n;\r\n  scanf(\"%d\",&n);\r\n  int A[100],r[100];\r\n  for(int i=0;i<n;i++){\r\n    scanf(\"%d\",r+i);\r\n  }\r\n  for(int i=0;i<n;i++){\r\n    scanf(\"%d\",A+i);\r\n  }\r\n  static int DP[2][SIZE]={0};\r\n  bool b=0;\r\n  for(int i=0;i<n;i++){\r\n    for(int j=0;j<SIZE;j++){\r\n      int L[rmax];\r\n      decode(j,rmax,L);\r\n      for(int k=0;k<=rmax;k++){\r\n\tint K=0;\r\n\tint L2[8],t=0;\r\n\tfor(int l=0;l<k;l++){\r\n\t  if(i-L[l]-1>=0&&L[l]+1<=r[i-L[l]-1]){\r\n\t    K+=A[i-L[l]-1];\r\n\t  }\r\n\t  if(L[l]<rmax-1){\r\n\t    L2[t]=L[l]+1;\r\n\t    t++;\r\n\t  }\r\n\t}\r\n\tL2[t]=0;\r\n\tt++;\r\n\tfor(int l=k;l<rmax;l++){\r\n\t  if(i-L[l]-1>=0&&L[l]+1<=r[i]){\r\n\t    K+=A[i];\r\n\t  }\r\n\t  if(L[l]<rmax-1){\r\n\t    L2[t]=L[l]+1;\r\n\t    t++;\r\n\t  }\r\n\t}\r\n\tint J=encode(L2,rmax);\r\n\tif(DP[!b][J]<DP[b][j]+K){\r\n\t  DP[!b][J]=DP[b][j]+K;\r\n\t}\r\n      }\r\n      DP[b][j]=0;\r\n    }\r\n    b=!b;\r\n  }\r\n  int M=0;\r\n  for(int j=0;j<SIZE;j++){\r\n    if(M<DP[b][j]){\r\n      M=DP[b][j];\r\n    }\r\n  }\r\n  printf(\"%d\\n\",M);\r\n  return 0;\r\n}", "problem_id": "48", "problem_title": "\u5c0f\u7c60\u5305 (Xiao Long Bao)", "datetime": "2018-07-30 22:45:07", "lang": "C++", "user": "taiki_okano", "sample_io": ["Accepted", "WrongAnswer"], "result": "Accepted", "testcase": [{"result": "Accepted", "max_score": "20", "io_result": ["Accepted"]}, {"result": "Accepted", "max_score": "20", "io_result": ["Accepted"]}, {"result": "Accepted", "max_score": "20", "io_result": ["Accepted"]}, {"result": "Accepted", "max_score": "20", "io_result": ["Accepted"]}, {"result": "Accepted", "max_score": "20", "io_result": ["Accepted"]}], "score": "100", "max_score": "100"}